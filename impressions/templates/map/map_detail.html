{% extends "base.html" %}
{% load staticfiles %}

{% block title %}Map View{% endblock %}

{% block stylesheets %}

    <link rel="stylesheet" href="{% static 'css/leaflet.css' %}" type="text/css"/>
  {{ block.super }}
  <style>
    .selecteddb {
      color: #ffffff;
    }

  </style>

{% endblock stylesheets %}

{% block javascript %}
  {{ block.super }}
  <script src="{% static 'js/leaflet.js' %}" type="text/javascript"></script>
{% endblock javascript %}

{% block wrapper_class %}"content-wrapper-map"{% endblock wrapper_class %}

{% block content_area %}

  <div class="map-wrapper">
    <section class="map-control-panel">
      <h2 class="heading">Map Eras</h2>
      <p>Select an Era</p>
      
      <ul class="map-layers">
      {% for layer in object.layer_list %}
          <li><a href="{{ layer.slug }}/{{ layer.layer_index }}">{{ layer.title|safe }} - {{ layer.era_description|safe }}</a></li>
      {% endfor %}
      </ul>
      <hr/>
    <!-- <div id="layer_list"><p>layer choice will come from JS</p></div> -->

    </section>

    <section class="map-area">
      <div id="map"></div>
      <script src="{% static 'js/map.js' %}" type="text/javascript"></script>
    </section>
  </div><!--map-wrapper-->

  <section class="map-about-panel">
    <h2 class="heading">About This Map</h2>
    {{ object.layer_blurb|safe}}

    <h2 class="heading">Sites</h2>

    <div id="site_list"><p>site list will come from JS</p></div>


    <h2 class="heading">Dig Deeper</h2>
    <ul class="map-deeper">
      {% for person in object.people.all %}
      <li>
        <a class="pop_item" href="{% url 'supporting:person_detail' person.slug %}">
          {{ person.first_name }} {{ person.last_name }}
        </a>
      </li>
      {% endfor %}
      {% for evidenceitem in object.evidence.all %}
        <li>
          <a class="pop_item" href="{% url 'supporting:evidenceitem_detail' evidenceitem.slug %}">
            {{ evidenceitem.title }}
          </a>
        </li>
      {% endfor %}
      {% for context in object.contexts.all %}
        <li>
          <a class="pop_item" href="{% url 'supporting:context_detail' context.slug %}">
            {{ context.title }}
          </a>
        </li>
      {% endfor %}
    </ul>      
  </section>


{% endblock content_area %}
