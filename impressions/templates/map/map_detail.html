{% extends "base.html" %}
{% load staticfiles %}

{% block title %}Map View{% endblock %}

{% block stylesheets %}

    <link rel="stylesheet" href="{% static 'css/leaflet.css' %}" type="text/css"/>
  {{ block.super }}

  <style type="text/css">
    .selecteddb {
      color: #ffffff;
    }
  </style>

{% endblock stylesheets %}

{% block javascript %}
  {{ block.super }}
  <script type="text/javascript" src="{% static 'js/tangram.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'js/leaflet.js' %}"></script>
  <!-- <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script> -->

{% endblock javascript %}

{% block wrapper_class %}"content-wrapper-map"{% endblock wrapper_class %}

{% block content_area %}

  <div class="map-wrapper">
    <section class="map-control-panel">
      
      <h2 class="heading">Show Maps</h2>
      <p>check the boxes below to show/hide maps.</p>

      
      <hr/>

      <form id="overlays" action="#">
        {# checkbox value and about_map href values have to match order set in map.js #}
        <ul class="map-layers">
          <li>
            <label for="id_0">
              <input id="id_0" name="overlay" type="checkbox" value="0" /> Today - Roads &amp; Towns
            </label>
            <a class="about_map" href="0">more info</a>
          </li>


          <li>
            <label for="id_3">
              <input id="id_3" name="overlay" type="checkbox" value="1" /> Hitchcock's Era: Geology
            </label>
            <a class="about_map" href="1">more info</a>
          </li>

        </ul>
      </form>


      <!--  

        <li><a href="">
          <label for="id_1">
            <input id="id_1" name="map-layers" type="checkbox" value="today-geo" /> Today: Geology
          </label></a>
        </li>
        <li><a href="">
          <label for="id_2">
            <input id="id_2" name="map-layers" type="checkbox" value="hitchcock-towns" /> Hitchcock's Era: Roads &amp; Towns
          </label></a>
        </li>

        <li><a href="">
          <label for="id_4">
            <input id="id_4" name="map-layers" type="checkbox" value="lake-hitchcock" /> Lake Hitchcock
          </label></a>
        </li>
        <li><a href="">
          <label for="id_5">
            <input id="id_4" name="map-layers" type="checkbox" value="glacier" /> Ice Age Glaciers
          </label></a>
        </li>        
        <li><a href="">
          <label for="id_6">
            <input id="id_5" name="topic" type="checkbox" value="pangea" /> Pangea
          </label></a>
        </li>
 -->
      <hr/>

      <h2 class="heading">About This Map</h2>

      <div id="about_map_ajax_wrapper">
        <p>--</p>
        
      </div>

    </section>

    <section class="map-area">
      <div id="map">


      </div>
      <script src="{% static 'js/map.js' %}" type="text/javascript"></script>
      </div>
    </section>
  </div><!--map-wrapper-->

  <section class="map-about-panel">

    <h2 class="heading">Location Sets</h2>
      
    <hr/>

    <form id="loc_sets" action="#">
      <ul class="map-layers">
        {% for layer in object.layer_list %} 
          <li>
            <input type="radio" name="loc_set" value="{{ layer.slug }}">{{ layer.title|safe }}
          </li>
       {% endfor %}
      </ul>
      
    </form>

    <hr/>
    <h2 class="heading">Sites</h2>

    <div id="site_list">
      <p>Site list set in JavaScript</p>
    </div>

    <hr/>

    <h2 class="heading">Dig Deeper</h2>

    <div id="deeper_ajax_wrapper">
      {% include 'map/_map_deeper.html' %}
    </div>
  
  </section>

  <script type="text/javascript">
    // set initial sites -- the first in list, should be "none"
    setSiteLayer('{{ object.slug }}');
  </script>

{% endblock content_area %}
