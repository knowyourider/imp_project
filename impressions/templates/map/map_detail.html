{% extends "base.html" %}
{% load staticfiles %}

{% block title %}Map View{% endblock %}

{% block stylesheets %}

    <link rel="stylesheet" href="{% static 'css/leaflet.css' %}" type="text/css"/>
  {{ block.super }}

  <style type="text/css">
    .about {
      max-height: 600px;
      width: 550px; }
  </style>

{% endblock stylesheets %}

{% block javascript %}
  {{ block.super }}
  <script type="text/javascript" src="{% static 'js/tangram.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'js/leaflet.js' %}"></script>
  <!-- <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script> -->

{% endblock javascript %}

{% block wrapper_class %}"content-wrapper-map"{% endblock wrapper_class %}

{% block content_area %}

<div class="map-wrapper">
  <section class="map-control-panel">
    
    <h2 class="heading">Show Maps</h2>
    <p>check the boxes below to show/hide maps.</p>

    
    <hr/>

    <form id="overlays" action="#">

      <ul class="map-layers">
      {% for overlay in object.overlay_list %} 
        <li>
          <label for="id_{{ overlay.layer_index }}">
            <input id="id_{{ overlay.layer_index }}" name="overlay" type="checkbox" value="{{ overlay.layer_index }}" /> {{ overlay.title|safe }}
          </label>
          <img src="{% static 'map/thumbpics/' %}{{ overlay.slug }}.jpg">
          {{ overlay.short_blurb|safe }}
          <a class="pop_item" href="{% url 'map:about_detail' overlay.slug %}">more</a>
        </li>
      {% endfor %}
      </ul>
    </form>

    <hr/>

<!--     <h2 class="heading">About This Map</h2>
    <div id="about_map_ajax_wrapper">
      <p>--</p>
    </div>
 -->
  </section>

  <section class="map-area">
    <div id="map">


    </div>
    <script src="{% static 'js/map.js' %}" type="text/javascript"></script>
    </div>
  </section>
</div><!--map-wrapper-->

<section class="map-about-panel">

  <h2 class="heading">Location Sets</h2>
    
  <hr/>

  <form id="loc_sets" action="#">
    <ul class="map-layers">
      {% for layer in object.layer_list %} 
        <li>
          <input type="radio" name="loc_set" value="{{ layer.slug }}">{{ layer.title|safe }}
        </li>
     {% endfor %}
    </ul>
    
  </form>

  <hr/>
  <h2 class="heading">Sites</h2>

  <div id="site_list">
    <p>Site list set in JavaScript</p>
  </div>

  <hr/>

  <h2 class="heading">Dig Deeper</h2>

  <div id="deeper_ajax_wrapper">
    {% include 'map/_map_deeper.html' %}
  </div>

</section>

<script type="text/javascript">
  // set initial sites -- the first in list, should be "none"
  setSiteLayer('{{ object.slug }}');
</script>

{% endblock content_area %}
